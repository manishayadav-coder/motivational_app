<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Motivational App</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body class="bg">

<nav class="navbar">
  <a href="index.html">ğŸ  Home</a>
  <a href="feed.html">ğŸ“¢ Feed</a>
  <a href="#" id="postBtn">â• Post</a>
  <a href="favourite.html">â­ Favourites</a>
  <a href="profile.html">ğŸ‘¤ Profile</a>
  <a href="login.html" onclick="logout()">ğŸšª Logout</a>
</nav>

<div class="container card" id="formContainer">
  <h1>ğŸŒŸ Daily Motivational Quotes ğŸŒŸ</h1>

  <label>Choose Language:</label>
  <select id="language">
    <option value="english">English</option>
    <option value="hindi">Hindi</option>
  </select>

  <label>Choose Category:</label>
  <select id="category">
    <option value="sad">Sad Motivation</option>
    <option value="love">Love Motivation</option>
    <option value="attitude">Attitude Motivation</option>
    <option value="krishna">Krishna Motivation</option>
    <option value="geeta">Shrimad Bhagavad Gita Motivation</option>
    <option value="birthday">Birthday Quotes</option>
    <option value="anniversary">Anniversary Quotes</option>
    <option value="good_morning">Good Morning Quotes</option>
    <option value="good_evening">Good Evening Quotes</option>
    <option value="festival">Festival Quotes</option>
  </select>

  <label>Enter Your Name:</label>
  <input type="text" id="username" placeholder="Your name..."/>

  <label>Upload Your Image:</label>
  <input type="file" id="imageUpload" name="file" accept="image/*"/>

  <button id="show-quote" class="btn-primary">Show Quotes</button>
</div>

<div class="container card" id="quoteSelection" style="display:none;">
  <h2>Select Your Favourite Quote</h2>
  <ul id="quoteList" class="quote-list"></ul>
</div>

<script>
  // ğŸ”¹ Backend URL
  const API_BASE = "https://motivational-app.onrender.com";  

  function logout() {
    localStorage.clear();
    alert("You have been logged out!");
    window.location.href = "login.html";  // redirect
  }

  // ğŸ”¹ Show Quotes button click event
  document.getElementById("show-quote").addEventListener("click", async () => {
    const language = document.getElementById("language").value;
    const category = document.getElementById("category").value;
    const username = document.getElementById("username").value;

    if (!username) {
      alert("âš ï¸ Please enter your name!");
      return;
    }

    try {
      // ğŸ”¹ Backend API call
      const response = await fetch(`${API_BASE}/api/quotes?language=${language}&category=${category}`);
      
      if (!response.ok) {
        throw new Error("Server error: " + response.statusText);
      }

      const quotes = await response.json();

      // ğŸ”¹ Show quotes list
      const quoteList = document.getElementById("quoteList");
      quoteList.innerHTML = ""; 

      quotes.forEach(q => {
        const li = document.createElement("li");
        li.textContent = q;   // âœ… direct string, not q.text
        quoteList.appendChild(li);
      });

      document.getElementById("formContainer").style.display = "none";
      document.getElementById("quoteSelection").style.display = "block";

    } catch (err) {
      console.error("Fetch error:", err);
      alert("âŒ Failed to load quotes. Please check your backend.");
    }
  });
</script>

</body>
</html>
